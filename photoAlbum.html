<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>photo album</title>

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
  </head>
  <body>
    <div id="the-photo-album-app">
      <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header mdl-layout--no-drawer-button">
        <header class="mdl-layout__header">
          <div class="mdl-layout__header-row">
            <span class="mdl-layout-title">Photo Album</span>
            <div class="mdl-layout-spacer"></div>
            <nav class="mdl-navigation mdl-layout--large-screen-only">
              <a class="mdl-navigation__link" href="">Link</a>
              <a class="mdl-navigation__link" href="">Link</a>
              <a class="mdl-navigation__link" href="">Link</a>
              <a class="mdl-navigation__link" href="">Link</a>
            </nav>
          </div>
        </header>
        <main class="mdl-layout__content">
          <div class="page-content">
            <div class="mdl-grid">
              <div class="mdl-cell mdl-cell--12-col">
                <h3>
                  About
                </h3>
                <p>
                  This is a basic photo album leveraging the
                  <a href="https://api.imgur.com/" target="_blank">
                    Imgur API <span class="material-icons">open_in_new</span>
                  </a>
                </p>
              </div>
            </div>
            <div class="mdl-cell mdl-cell--12-col">
              {{ images }}
            </div>
          </div>
        </main>
      </div>
    </div>
    <script src="https://code.getmdl.io/1.3.0/material.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.1.10/vue.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/superagent/3.3.2/superagent.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.4/lodash.min.js"></script>
    <script>
    const IMGUR_CLIENT_ID = '49e246bf973b316';
    var app = new Vue({
      el: '#the-photo-album-app',
      data: {
        searchTag: 'coffee',
        images: [],
      },
      created() {
        this.fetchPhotosMatchingTag(this.searchTag);
      },
      methods: {
        fetchPhotosMatchingTag(tag) {
          const sort = 'viral';
          const page = '0';
          const url = `https://api.imgur.com/3/gallery/t/${tag}/${sort}/${page}`;
          const self = this;
          superagent.get(url)
          .accept('application/json')
          .set('Authorization', `Client-ID ${IMGUR_CLIENT_ID}`)
          .end(function(error, response) {
            if (error) {
              console.log(error);
              return;
            }
            const apiData = response.body.data;
            self.images = _.take(apiData.items, 10);
          });
        },
      },
    });
    </script>
  </body>
</html>
